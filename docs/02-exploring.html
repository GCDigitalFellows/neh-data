<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Exploring the data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Visualizing NEH</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="01-prepare.html">Preparing data</a>
</li>
<li>
  <a href="02-exploring.html">Exploring data</a>
</li>
<li>
  <a href="03-inequality.html">Funding inequality</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Exploring the data</h1>

</div>


<pre class="r"><code>library(tidyverse)
library(jsonlite)
library(forcats)
library(ggmap)
library(broom)
library(noncensus)
library(blscrapeR)
data(&quot;states&quot;)
theme_set(theme_bw())</code></pre>
<div id="definitions" class="section level3">
<h3>Definitions</h3>
<p>In defining the funding analyze, we learn from the <a href="https://securegrants.neh.gov/Open/data/NEH_GrantsDictionary.pdf">NEH Grants Data Dictionary</a> that there are five different dollar amounts included in the grants dataset:</p>
<ol style="list-style-type: decimal">
<li>ApprovedOutright: Approved amount (outright funds). (Outright funds are not contingent on additional fundraising.)</li>
<li>ApprovedMatching: Approved amount (matching funds). (Federal matching funds require a grantee to secure gift funds from third parties before federal funds are awarded. Except for Challenge Grants, NEH matching awards are made on a one-to-one basis.)</li>
<li>AwardOutright: Amount actually awarded (outright funds).</li>
<li>AwardMatching: Amount actually awarded (matching funds).</li>
<li>OriginalAmount: Original amount of grant (minus any grant supplements).</li>
</ol>
<p>We will define the relevant <code>funding</code> value as the sum of <code>ApprovedOutright</code> and <code>ApprovedMatching</code>. Furthermore, we will adjust funding dollars into 2016 dollars.</p>
<pre class="r"><code>adj &lt;- inflation_adjust(2017) %&gt;%
  data_frame(YearAwarded = seq_along(.) + 1946, Adj = .)</code></pre>
</div>
<div id="number-of-grants-awarded-over-time" class="section level3">
<h3>Number of grants awarded over time</h3>
<p>Funding trends can be broken into three periods:</p>
<ol style="list-style-type: decimal">
<li>initial increase over 1965-1979;</li>
<li>step down over 1980-1995;</li>
<li>further step down over 1996-2016</li>
</ol>
<pre class="r"><code>grants %&gt;%
  group_by(YearAwarded) %&gt;%
  count %&gt;%
  ggplot(aes(x=YearAwarded, y=n)) +
    geom_point() +
    geom_line() +
    scale_x_continuous(breaks=seq(1960,2017,by=5)) +
    geom_vline(xintercept=1979, colour=&quot;red&quot;, linetype=&quot;longdash&quot;) +
    geom_vline(xintercept=1995, colour=&quot;red&quot;, linetype=&quot;longdash&quot;)</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="amount-awarded-over-time" class="section level3">
<h3>Amount awarded over time</h3>
<p>Aggregating all the funding approved per year, it would seem as many dollars were distributed in 2016 as there were in 1980.</p>
<pre class="r"><code>grants %&gt;%
  filter(YearAwarded &lt; 2017) %&gt;%
  mutate(Funding = ApprovedOutright + ApprovedMatching) %&gt;%
  group_by(YearAwarded) %&gt;%
  summarise(Funding = sum(Funding)) %&gt;%
  ggplot(aes(x=YearAwarded, y=Funding)) +
    geom_point() +
    geom_line()</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Being that we know that the number of grants has declined over time while little change is apparent in total funding, has the average amount of funding per project increased over this period? The following does seem to suggest so.</p>
<pre class="r"><code>grants %&gt;%
  group_by(YearAwarded) %&gt;%
  summarise(AvgFundingPerProject = sum(AwardOutright) / n()) %&gt;%
  ggplot(aes(x=YearAwarded, y=AvgFundingPerProject)) +
    geom_point() +
    geom_line()</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>But that assumes that the dollar amounts in these two years are equivalent, but that ignores inflation. The change in amounts of funding approved over time is very different if the dollar amounts are adjusted for inflation. Instead of there being little change over the past 30 years, there is a readily apparent decline in funding, with 2016 being roughly one-third of the level of funding in 1980.</p>
<pre class="r"><code>grants %&gt;%
  mutate(Funding = ApprovedOutright + ApprovedMatching) %&gt;%
  select(YearAwarded, Funding) %&gt;%
  left_join(adj) %&gt;%
  mutate(Funding_2017_Adj = Funding / Adj) %&gt;%
  group_by(YearAwarded) %&gt;%
  summarise(Funding_Unadjusted = sum(Funding),
            Funding_Adjusted = sum(Funding_2017_Adj)) %&gt;%
  gather(Type, Amount, -YearAwarded) %&gt;%
  ggplot(aes(x=YearAwarded, y=Amount, colour=Type)) +
    geom_point() +
    geom_line()</code></pre>
<pre><code>## Joining, by = &quot;YearAwarded&quot;</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>For the remaining analyses over time, we will use the inflation adjusted dollars.</p>
</div>
<div id="funding-for-different-divisions-over-time" class="section level3">
<h3>Funding for different divisions over time</h3>
<pre class="r"><code>grants %&gt;%  
  mutate(Funding = ApprovedOutright + ApprovedMatching) %&gt;%
  select(YearAwarded, Division, Funding) %&gt;%
  left_join(adj) %&gt;%
  mutate(Funding = Funding / Adj) %&gt;%
  group_by(YearAwarded, Division) %&gt;%
  summarise(Funding = sum(Funding)) %&gt;%
  ggplot(aes(x=YearAwarded, y=Funding, fill=fct_reorder(Division, -Funding))) +
    geom_bar(stat=&#39;identity&#39;) +
    scale_fill_discrete(name=&#39;Division&#39;) </code></pre>
<pre><code>## Joining, by = &quot;YearAwarded&quot;</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-6-1.png" width="960" /></p>
</div>
<div id="total-funding-by-state-and-decade" class="section level3">
<h3>Total funding by state and decade</h3>
<pre class="r"><code>grants %&gt;%
  filter(InstState %in% state.abb) %&gt;%
  mutate(Funding = ApprovedOutright + ApprovedMatching,
         Decade = as.factor(YearAwarded - (YearAwarded %% 10))) %&gt;%
  left_join(adj) %&gt;%
  mutate(Funding = Funding / Adj) %&gt;%
  select(Decade, InstState, Funding) %&gt;%
  group_by(InstState, Decade) %&gt;%
  summarise(Funding = sum(Funding)) %&gt;%
  ggplot(aes(fct_reorder(InstState, -Funding), Funding, fill=Decade)) +
    geom_bar(stat=&#39;identity&#39;) +
    scale_fill_discrete(name=&#39;Decade&#39;) +
    coord_flip()</code></pre>
<pre><code>## Joining, by = &quot;YearAwarded&quot;</code></pre>
<p><img src="02-exploring_files/figure-html/unnamed-chunk-7-1.png" width="960" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
